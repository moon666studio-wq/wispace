<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="WiSpace - Nonton Konser & Dokumenter Musik">
    <meta property="og:description" content="Tonton koleksi dokumenter musik dan konser legendaris dengan kualitas mantap cuma di WiSpace!">
    <meta property="og:image" content="https://i.postimg.cc/BnCg1BKG/wispaceweb-logo-bulat-bckground-putih.png"> 
    <meta property="og:type" content="website">
    
    <title>Sedang Menonton - WiSpace</title>
    
    <link rel="icon" href="https://i.postimg.cc/BnCg1BKG/wispaceweb-logo-bulat-bckground-putih.png" type="image/png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f0f0f; color: white; }
        :root { --plyr-color-main: #24A1DE; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>   
    <script src="https://pl28813515.effectivegatecpm.com/ab/d7/9b/abd79b571ba0638a333dbf679a304053.js"></script>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
</head>
<body class="font-sans antialiased pb-20">               

    <nav class="flex flex-wrap justify-between items-center p-4 bg-[#0f0f0f] z-50 border-b border-gray-800 gap-y-4 sticky top-0">
        <a href="index.html" class="flex items-center gap-2 hover:opacity-80 transition">
            <img src="https://i.postimg.cc/8zfWBd9V/wispaceweb-logo.png" alt="Home" class="h-10">
        </a>
        <div class="flex flex-1 w-full md:w-auto md:max-w-2xl mx-0 md:mx-8 order-3 md:order-2">
            <input id="search-input-watch" type="text" placeholder="Search videos..." class="w-full bg-[#121212] border border-gray-700 rounded-l-full px-4 py-2 focus:outline-none focus:border-blue-500 text-white text-sm">
            <button class="bg-[#222222] border border-l-0 border-gray-700 rounded-r-full px-5 py-2 hover:bg-gray-700">üîç</button>
        </div>
    </nav>

    <div class="max-w-[1600px] mx-auto p-4 lg:p-6 flex flex-col lg:flex-row gap-6 relative">
        
        <div class="flex-1 lg:max-w-[70%] xl:max-w-[75%] min-w-0">
            
            <div id="video-container" class="w-full aspect-video bg-black shadow-lg border border-gray-800 relative z-10 rounded-xl overflow-hidden">
                </div>
            
            <div class="mt-4 mb-6 border-b border-gray-800 pb-4">
                <h1 id="video-title" class="text-xl md:text-2xl font-bold mb-4">Memuat Judul...</h1>
                <div class="flex flex-wrap items-center justify-between gap-4">
                    <div class="flex items-center gap-3">
                        <img id="channel-avatar" src="https://via.placeholder.com/150" class="w-10 h-10 rounded-full object-cover bg-gray-700 border border-gray-500 hidden">
                        <div>
                            <h3 id="channel-name" class="font-bold text-[15px]">Memuat Channel...</h3>
                            <p id="views-date" class="text-gray-400 text-[13px]">WiSpace</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <button id="like-btn" class="flex items-center gap-2 text-gray-400 hover:text-white transition px-4 py-2 rounded-full bg-gray-800 hover:bg-gray-700 font-medium text-sm">
                            <span id="like-icon">ü§ç</span> <span id="like-text">Suka</span>
                        </button>
                        <button id="share-btn" class="flex items-center gap-2 text-gray-400 hover:text-white transition px-4 py-2 rounded-full bg-gray-800 hover:bg-gray-700 font-medium text-sm">
                            <span>üîó</span> <span>Bagikan</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="mb-6 bg-gray-800 border border-gray-700 rounded-lg p-4 flex items-start gap-3">
                <div class="text-2xl">üí°</div>
                <div>
                    <h4 class="text-white font-semibold text-sm md:text-base">Tips Nonton Pakai Subtitle Indonesia</h4>
                    <p class="text-gray-400 text-xs md:text-sm mt-1">
                        Klik ikon <strong>CC</strong> di pojok kanan bawah video ‚ûî Klik ikon <strong>Gear (Setting) ‚öôÔ∏è</strong> ‚ûî Pilih <strong>Auto-translate</strong> ‚ûî Scroll dan pilih <strong>Indonesian</strong>.
                    </p>
                </div>
            </div>

            <div class="mb-2 w-full flex justify-center overflow-hidden">
                <div class="transform scale-75 origin-top w-full max-w-3xl">
                    <div class="p-2 border border-dashed border-gray-700 rounded-xl text-center text-gray-500 text-xs bg-[#121212]">
                        <script async="async" data-cfasync="false" src="https://pl28813519.effectivegatecpm.com/c7cff8ba29baa58b686117866fd1c5e3/invoke.js"></script>
                        <div id="container-c7cff8ba29baa58b686117866fd1c5e3"></div>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-800 pt-6">
                <h3 class="text-lg font-bold mb-4">Diskusi & Request</h3>
                <div class="bg-[#121212] p-6 rounded-xl border border-gray-800 text-center">
                    <div class="flex justify-center mb-4">
                        <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center shadow-lg shadow-blue-500/20">
                            <svg class="w-10 h-10 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                            </svg>
                        </div>
                    </div>
                    <h4 class="text-xl font-bold mb-2">Mau Request atau Tanya-tanya?</h4>
                    <p class="text-gray-400 text-sm mb-6 max-w-md mx-auto">Gabung ke grup Telegram WiSpace buat ngobrol langsung sama admin!</p>
                    <a href="https://t.me/+kt4HLaL6IT85NDI1" target="_blank" class="inline-flex items-center gap-2 bg-[#24A1DE] hover:bg-[#1e87bb] text-white font-bold py-3 px-8 rounded-full transition-all transform hover:scale-105 active:scale-95 shadow-lg">
                        Join Group Telegram
                    </a>
                </div>
            </div>
            
        </div> 

        <div class="w-full lg:w-[30%] xl:w-[25%] lg:min-w-[350px] flex-shrink-0 lg:sticky lg:top-[80px] lg:h-[calc(100vh-100px)] flex flex-col">
            <h3 class="font-bold mb-4 text-lg flex-shrink-0">Berikutnya</h3>
            <div id="recommendation-list" class="flex flex-col gap-3 overflow-y-auto hide-scrollbar pb-10">
                </div>
        </div>

    </div>

    <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const idVideo = urlParams.get('id');

        fetch('data.json')
            .then(res => res.json())
            .then(data => {
                const videoSesuai = data.find(vid => vid.id == idVideo);
                
                if(videoSesuai) {
                    document.getElementById('video-title').innerText = videoSesuai.title;
                    document.getElementById('channel-name').innerText = videoSesuai.channel_name || "WiSpace";
                    
                    if(videoSesuai.channel_avatar) {
                        document.getElementById('channel-avatar').src = videoSesuai.channel_avatar;
                        document.getElementById('channel-avatar').classList.remove('hidden');
                    }

                    const videoContainer = document.getElementById('video-container');

                    if (videoSesuai.server === "febbox" || (videoSesuai.videoUrl && videoSesuai.videoUrl.includes('.mp4'))) {
                        videoContainer.innerHTML = `
                            <video id="plyr-player" playsinline controls data-poster="${videoSesuai.thumbnail}" class="w-full h-full">
                                <source src="${videoSesuai.videoUrl}" type="video/mp4" />
                            </video>
                        `;
                        new Plyr('#plyr-player', {
                            controls: ['play-large', 'play', 'progress', 'current-time', 'mute', 'volume', 'captions', 'settings', 'pip', 'airplay', 'fullscreen'],
                            settings: ['captions', 'quality', 'speed', 'loop']
                        });
                    } else {
                        videoContainer.innerHTML = `
                            <iframe id="gdrive-player" 
                                class="absolute top-0 left-0 w-full h-full" 
                                src="https://drive.google.com/file/d/${videoSesuai.videoUrl}/preview" 
                                frameborder="0" 
                                allow="autoplay; fullscreen; encrypted-media; picture-in-picture" 
                                allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true">
                            </iframe>
                        `;
                    }

                    const rekomenList = document.getElementById('recommendation-list');
                    const videoLain = data.filter(vid => vid.id != idVideo).slice(0, 15); 
                    
                    videoLain.forEach(vid => {
                        rekomenList.innerHTML += `
                            <a href="watch.html?id=${vid.id}" class="flex gap-2 group cursor-pointer mb-2">
                                <div class="relative w-40 flex-shrink-0 aspect-video bg-gray-800 rounded-lg overflow-hidden">
                                    <img src="${vid.thumbnail}" class="w-full h-full object-cover group-hover:scale-105 transition duration-300">
                                    <div class="absolute bottom-1 right-1 bg-black/80 text-white text-[10px] px-1 rounded">${vid.duration}</div>
                                </div>
                                <div class="flex flex-col overflow-hidden py-1">
                                    <h4 class="font-bold text-[14px] leading-tight mb-1 group-hover:text-[#24A1DE] transition line-clamp-2">${vid.title}</h4>
                                    <p class="text-gray-400 text-[12px] truncate">${vid.channel_name || "WiSpace"}</p>
                                </div>
                            </a>
                        `;
                    });

                } else {
                    document.getElementById('video-title').innerText = "Video tidak ditemukan di data.json";
                }
            })
            .catch(err => console.error("Error ngambil data:", err));

        const likeBtn = document.getElementById('like-btn');
        const likeIcon = document.getElementById('like-icon');
        const likeText = document.getElementById('like-text');
        let isLiked = false;

        if (likeBtn) {
            likeBtn.addEventListener('click', () => {
                isLiked = !isLiked;
                if (isLiked) {
                    likeIcon.innerText = '‚ù§Ô∏è'; 
                    likeText.innerText = 'Disukai';
                    likeBtn.classList.add('text-pink-500');
                } else {
                    likeIcon.innerText = 'ü§ç'; 
                    likeText.innerText = 'Suka';
                    likeBtn.classList.remove('text-pink-500');
                }
            });
        }

        const shareBtn = document.getElementById('share-btn');
        if (shareBtn) {
            shareBtn.addEventListener('click', async () => {
                const shareData = {
                    title: document.title,
                    text: 'Cek tontonan keren ini di WiSpace bro!',
                    url: window.location.href
                };
                try {
                    if (navigator.share) {
                        await navigator.share(shareData);
                    } else {
                        navigator.clipboard.writeText(window.location.href);
                        alert('Link video berhasil di-copy! Tinggal paste ke temen lo bro üöÄ');
                    }
                } catch (err) {
                    console.log('Batal share atau ada error:', err);
                }
            });
        }
    </script>
</body>
</html>